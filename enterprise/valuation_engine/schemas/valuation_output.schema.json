{
  "$id": "valuation_output.schema.json",
  "type": "object",
  "description": "Results generated by the valuation engine.",
  "properties": {
    "modelUsed": {
      "type": "string",
      "enum": ["cap_rate", "dcf_light", "comparables_light", "cost_approach"],
      "description": "The primary valuation methodology applied"
    },
    "valuation": {
      "type": "object",
      "properties": {
        "valueCentral": { "type": "number", "description": "The primary estimated value" },
        "valueLow": { "type": "number", "description": "Conservative estimate (-10-15%)" },
        "valueHigh": { "type": "number", "description": "Aggressive estimate (+10-15%)" },
        "currency": { "type": "string", "default": "USD" }
      },
      "required": ["valueCentral"]
    },
    "metrics": {
      "type": "object",
      "properties": {
        "noiEffective": { "type": "number", "description": "NOI used for calculation" },
        "capRateApplied": { "type": "number", "description": "Cap rate used (%)" },
        "grossYield": { "type": "number" },
        "cashOnCash": { "type": "number", "description": "Cash yield on equity (if leverage used)" },
        "pricePerSqm": { "type": "number", "description": "Simplified unit metric" }
      }
    },
    "summaryText": {
      "type": "string",
      "description": "A brief, human-readable explanation of the valuation result."
    },
    "generatedAt": { "type": "string", "format": "date-time" }
  },
  "required": ["modelUsed", "valuation", "metrics", "summaryText"]
}